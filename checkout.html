<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تکمیل سفارش - فروشگاه توسی</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="glass-header">
        <nav>
            <div class="logo">
                <h2>فروشگاه توسی</h2>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">خانه</a></li>
                <li><a href="products.html">محصولات</a></li>
                <li><a href="cart.html">سبد خرید (<span id="cart-count">0</span>)</a></li>
                <li><a href="contact.html">تماس</a></li>
            </ul>
        </nav>
    </header>

    <main class="checkout-main">
        <div class="container">
            <h1>تکمیل اطلاعات سفارش</h1>
            
            <div class="checkout-steps">
                <div class="step active">1. اطلاعات ارسال</div>
                <div class="step">2. پرداخت</div>
                <div class="step">3. تأیید نهایی</div>
            </div>

            <div class="checkout-content">
                <div class="checkout-form">
                    <h3>اطلاعات تحویل</h3>
                    <form id="checkoutForm">
                        <div class="form-group">
                            <label for="fullName">نام و نام خانوادگی *</label>
                            <input type="text" id="fullName" name="fullName" required>
                        </div>

                        <div class="form-group">
                            <label for="phone">شماره تماس *</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>

                        <div class="form-group">
                            <label for="address">آدرس دقیق *</label>
                            <textarea id="address" name="address" rows="3" required>مشهد، بلوار وکیل‌آباد</textarea>
                        </div>

                        <div class="form-group">
                            <label for="postalCode">کد پستی</label>
                            <input type="text" id="postalCode" name="postalCode">
                        </div>

                        <div class="form-group">
                            <label>روش ارسال</label>
                            <div class="delivery-options">
                                <label class="delivery-option">
                                    <input type="radio" name="delivery" value="express" checked>
                                    <span>پیک فوری (۲۴ ساعته) - رایگان</span>
                                </label>
                                <label class="delivery-option">
                                    <input type="radio" name="delivery" value="standard">
                                    <span>پست پیشتاز (۳-۲ روز) - رایگان</span>
                                </label>
                            </div>
                        </div>

                        <button type="submit" class="btn-luxury">ادامه فرآیند پرداخت</button>
                    </form>
                </div>

                <div class="order-summary">
                    <h3>خلاصه سفارش</h3>
                    <div class="summary-items" id="checkout-items">
                        <!-- آیتم‌های سبد خرید -->
                    </div>
                    <div class="summary-total">
                        <div class="total-row">
                            <span>جمع کل:</span>
                            <span id="checkout-total">۰ تومان</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            updateCheckoutSummary();
        });

        function updateCheckoutSummary() {
            const checkoutItems = document.getElementById('checkout-items');
            const checkoutTotal = document.getElementById('checkout-total');

            if (window.cart && window.cart.items.length > 0) {
                checkoutItems.innerHTML = window.cart.items.map(item => `
                    <div class="summary-item">
                        <span>${item}</span>
                        <span>${getItemPrice(item)}</span>
                    </div>
                `).join('');

                checkoutTotal.textContent = calculateTotalPrice();
            }
        }

        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            window.location.href = 'order-confirm.html';
        });

        function getItemPrice(item) {
            const prices = {
                'جاروبرقی پیشرفته': '۲,۵۰۰,۰۰۰ تومان',
                'مایکروفر دیجیتال': '۴,۲۰۰,۰۰۰ تومان',
                'ماشین لباسشویی': '۸,۵۰۰,۰۰۰ تومان',
                'یخچال ساید بای ساید': '۲۵,۰۰۰,۰۰۰ تومان'
            };
            return prices[item] || '۰ تومان';
        }

        function calculateTotalPrice() {
            const prices = {
                'جاروبرقی پیشرفته': 2500000,
                'مایکروفر دیجیتال': 4200000,
                'ماشین لباسشویی': 8500000,
                'یخچال ساید بای ساید': 25000000
            };

            const total = window.cart.items.reduce((sum, item) => {
                return sum + (prices[item] || 0);
            }, 0);

            return new Intl.NumberFormat('fa-IR').format(total) + ' تومان';
        }
    </script>
</body>
</html>
